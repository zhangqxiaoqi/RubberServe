{
    "version": 3,
    "sources": [
        "..\\..\\src\\controller\\pro.js"
    ],
    "names": [
        "Base",
        "require",
        "pagination",
        "module",
        "exports",
        "indexAction",
        "option",
        "desc",
        "pageNum",
        "url",
        "class",
        "text",
        "next",
        "prev",
        "total",
        "list",
        "model",
        "order",
        "page",
        "get",
        "countSelect",
        "data",
        "forEach",
        "item",
        "IMGS",
        "JSON",
        "parse",
        "html",
        "assign",
        "display",
        "homeAction",
        "limit",
        "select",
        "getProsAction",
        "json",
        "code",
        "saveAction",
        "post",
        "think",
        "isEmpty",
        "ID",
        "res",
        "add",
        "msg",
        "where",
        "update",
        "delAction",
        "delete",
        "getDetailAction",
        "find"
    ],
    "mappings": "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",
    "file": "..\\..\\src\\controller\\pro.js",
    "sourcesContent": [
        "// import {Common} from '../utils/common.js';\r\nconst Base = require('./base.js');\r\nconst pagination = require('../utils/pagination');\r\nmodule.exports = class extends Base {\r\n  async indexAction() {\r\n    const option = {\r\n      desc: false, // show description\r\n      pageNum: 1,\r\n      url: '', // page url, when not set, it will auto generated\r\n      class: 'page', // pagenation extra class\r\n      text: {\r\n        next: 'Next',\r\n        prev: 'Prev',\r\n        total: 'count: __COUNT__ , pages: __PAGE__'\r\n      }\r\n    };\r\n    const list = await this.model('rubber_pro')\r\n      .order('ID DESC')\r\n      .page(this.get('page'))\r\n      .countSelect();\r\n    // list.data = list.data.map(item => (item.IMGS = JSON.parse(item.IMGS)));\r\n    list.data.forEach(item => {\r\n      item.IMGS = JSON.parse(item.IMGS);\r\n    });\r\n    const html = pagination(list, {}, option);\r\n    this.assign({ list });\r\n    this.assign('pagination', html);\r\n    return this.display();\r\n  }\r\n  async homeAction() {\r\n    const list = await this.model('rubber_pro')\r\n      .order('ID DESC')\r\n      .limit(10)\r\n      .select();\r\n    list.forEach(item => {\r\n      item.IMGS = JSON.parse(item.IMGS);\r\n    });\r\n    return list;\r\n  }\r\n  async getProsAction() {\r\n    const list = await this.model('rubber_pro')\r\n      .order('ID DESC')\r\n      .page(this.get('page'))\r\n      .countSelect();\r\n    this.assign({ list });\r\n    return this.json({ code: 200, list });\r\n  }\r\n  /**\r\n   *保存\r\n   */\r\n  async saveAction() {\r\n    const data = this.post();\r\n    // 如果没有ID，则是新增\r\n    if (think.isEmpty(data.ID)) {\r\n      const res = await this.model('rubber_pro').add(data);\r\n      if (res) {\r\n        return this.json({ code: 200, msg: '新增成功' });\r\n      } else {\r\n        return this.json({ code: -1, msg: '新增失败' });\r\n      }\r\n    } else {\r\n      // 更新\r\n      const res = await this.model('rubber_pro')\r\n        .where({ ID: data.ID })\r\n        .update(data);\r\n      if (res) {\r\n        return this.json({ code: 200, msg: '修改成功' });\r\n      } else {\r\n        return this.json({ code: -1, msg: '修改失败' });\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * 删除\r\n   */\r\n  async delAction() {\r\n    if (this.get('ID')) {\r\n      const res = await this.model('rubber_pro')\r\n        .where({ ID: this.get('ID') })\r\n        .delete();\r\n      if (res) {\r\n        return this.json({ code: 200, msg: '删除成功' });\r\n      } else {\r\n        return this.json({ code: -1, msg: '删除失败' });\r\n      }\r\n    } else {\r\n      return this.json({ code: -1, msg: '没有获取相应ID' });\r\n    }\r\n  }\r\n  /**\r\n   *获取详情\r\n   */\r\n  async getDetailAction() {\r\n    if (this.get('ID')) {\r\n      const res = await this.model('rubber_pro')\r\n        .where({ ID: this.get('ID') })\r\n        .find();\r\n      return this.json({ code: 200, msg: '', data: res });\r\n    } else {\r\n      return this.json({ code: -1, msg: '没有获取相应ID' });\r\n    }\r\n  }\r\n};\r\n"
    ]
}