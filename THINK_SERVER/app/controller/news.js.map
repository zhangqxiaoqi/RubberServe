{
    "version": 3,
    "sources": [
        "..\\..\\src\\controller\\news.js"
    ],
    "names": [
        "Base",
        "require",
        "pagination",
        "module",
        "exports",
        "indexAction",
        "option",
        "desc",
        "pageNum",
        "url",
        "class",
        "text",
        "next",
        "prev",
        "total",
        "newsList",
        "model",
        "order",
        "where",
        "TYPE",
        "page",
        "get",
        "countSelect",
        "html",
        "assign",
        "display",
        "homeAction",
        "limit",
        "select",
        "getNewsAction",
        "list",
        "json",
        "code",
        "saveAction",
        "data",
        "post",
        "think",
        "isEmpty",
        "ID",
        "res",
        "add",
        "msg",
        "update",
        "delAction",
        "delete",
        "getDetailAction",
        "find"
    ],
    "mappings": "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",
    "file": "..\\..\\src\\controller\\news.js",
    "sourcesContent": [
        "// import {Common} from '../utils/common.js';\r\nconst Base = require('./base.js');\r\nconst pagination = require('../utils/pagination');\r\nmodule.exports = class extends Base {\r\n  async indexAction() {\r\n    const option = {\r\n      desc: false, // show description\r\n      pageNum: 1,\r\n      url: '', // page url, when not set, it will auto generated\r\n      class: 'page', // pagenation extra class\r\n      text: {\r\n        next: 'Next',\r\n        prev: 'Prev',\r\n        total: 'count: __COUNT__ , pages: __PAGE__'\r\n      }\r\n    };\r\n    const newsList = await this.model('rubber_news')\r\n      .order('ID DESC')\r\n      .where({ TYPE: 0 })\r\n      .page(this.get('page'))\r\n      .countSelect();\r\n    const html = pagination(newsList, {}, option);\r\n    this.assign({ newsList });\r\n    this.assign('pagination', html);\r\n    return this.display();\r\n  }\r\n  async homeAction() {\r\n    const newsList = await this.model('rubber_news')\r\n      .order('ID DESC')\r\n      .limit(3)\r\n      .select();\r\n    return newsList;\r\n  }\r\n  async getNewsAction() {\r\n    const list = await this.model('rubber_news')\r\n      .order('ID DESC')\r\n      .page(this.get('page'))\r\n      .countSelect();\r\n    this.assign({ list });\r\n    return this.json({ code: 200, list });\r\n  }\r\n  /**\r\n   *保存\r\n   */\r\n  async saveAction() {\r\n    const data = this.post();\r\n    // 如果没有ID，则是新增\r\n    if (think.isEmpty(data.ID)) {\r\n      const res = await this.model('rubber_news').add(data);\r\n      if (res) {\r\n        return this.json({ code: 200, msg: '新增成功' });\r\n      } else {\r\n        return this.json({ code: -1, msg: '新增失败' });\r\n      }\r\n    } else {\r\n      // 更新\r\n      const res = await this.model('rubber_news')\r\n        .where({ ID: data.ID })\r\n        .update(data);\r\n      if (res) {\r\n        return this.json({ code: 200, msg: '修改成功' });\r\n      } else {\r\n        return this.json({ code: -1, msg: '修改失败' });\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * 删除\r\n   */\r\n  async delAction() {\r\n    if (this.get('ID')) {\r\n      const res = await this.model('rubber_news')\r\n        .where({ ID: this.get('ID') })\r\n        .delete();\r\n      if (res) {\r\n        return this.json({ code: 200, msg: '删除成功' });\r\n      } else {\r\n        return this.json({ code: -1, msg: '删除失败' });\r\n      }\r\n    } else {\r\n      return this.json({ code: -1, msg: '没有获取相应ID' });\r\n    }\r\n  }\r\n  /**\r\n   *获取详情\r\n   */\r\n  async getDetailAction() {\r\n    if (this.get('ID')) {\r\n      const res = await this.model('rubber_news')\r\n        .where({ ID: this.get('ID') })\r\n        .find();\r\n      return this.json({ code: 200, msg: '', data: res });\r\n    } else {\r\n      return this.json({ code: -1, msg: '没有获取相应ID' });\r\n    }\r\n  }\r\n};\r\n"
    ]
}