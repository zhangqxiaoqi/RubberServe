{% extends 'base.html' %}
{% block main %}
<!--banner-->
<section class="banner">
  <img src="static/images/contactbanner.jpg" alt="" />
</section>

<!--内页面包屑-->
<!-- <div class="mbx">
   <div class="container">
     您当前的位置：
     <a href="index.html">首页</a> > 
     <a href="about.html">关于我们</a> > 
     <span>公司简介</span>
   </div>
 </div> -->
<!-- <div class="mbx">
  <div class="container">
    您当前的位置：
    <a href="index.html">首页</a> > 
    <span>联系我们</span>
  </div>
</div> -->
<div class="ny">

  <div class="contact">
    <div class="contacttit">
      <span>{{columnTitle.contact}}</span>
    </div>
    <div class="container">
      <div class="contacttxt">
        {{info[locale+'_CONTENT']}}
      </div>
      <ul class="contact_us clearfix">
        <li>
          <b>{{columnTitle.phone}}</b>
          <a href={{'tel:'+companyInfo.PHONE}}>{{companyInfo.PHONE}}</a>
        </li>
        <li>
          <b>{{columnTitle.email}}</b>
          <a href={{'mailto:'+companyInfo.EMAIL}}>{{companyInfo.EMAIL}}</a>
        </li>
        <li>
          <b>{{columnTitle.address}}</b>
          {{companyInfo.ADDRESS_CN}}
        </li>
        <li>
          <b>{{columnTitle.postcode}}</b>
          {{companyInfo.POSTCODE}}
        </li>
      </ul>

      <div id="map"></div>


      <!--在线留言-->
      <div class="message" id="message">
        <label><span>{{columnTitle.name}}</span><input id="name" type="text" /></label>
        <label><span>{{columnTitle.phone}}</span><input id="phone" type="text" /><em>*</em></label>
        <label><span>{{columnTitle.address}}</span><input id="address" type="text" /></label>
        <label><span>{{columnTitle.email}}</span><input id="email" type="text" /><em>*</em></label>
        <label class="messagecon"><span>{{columnTitle.leave_meg}}</span><textarea
            id="leave_info"></textarea><em>*</em></label>

        <label class="sub"><input id="submit_btn" type="submit" value={{columnTitle.submit}} /></label>
        <label class="reset"><input id="reset_btn" type="reset" value={{columnTitle.reset}} /></label>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=6d88e38ab7f507ee19cec46443691d95"></script>

<!--Include Js-->
<script src="static/js/jquery.min.js" type="text/javascript" charset="utf-8"></script>

<!--移动端导航-->
<script src="static/js/jquery.mmenu.all.min.js" type="text/javascript" charset="utf-8"></script>

<script src="static/js/public.js" type="text/javascript" charset="utf-8"></script>

<!--slick-->
<script src="static/js/slick.min.js" type="text/javascript" charset="utf-8"></script>

<!--placeholder-->
<script src="static/js/jquery.placeholder.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
  var claerControls = function () {
    $('#name').val('');
    $('#phone').val('');
    $('#address').val('');
    $('#email').val('');
    $('#leave_info').val('');
  }
  $(function () {
    $('input, textarea').placeholder();
    $('#reset_btn').click(function () {
      claerControls();
    });
    $('#submit_btn').click(function () {
      var NAME = $('#name').val();
      var PHONE = $('#phone').val();
      var ADDRESS = $('#address').val();
      var EMAIL = $('#email').val();
      var LEAVE_INFO = $('#leave_info').val();
      if (NAME.trim().length === 0 || PHONE.trim().length === 0 || ADDRESS.trim().length === 0 || EMAIL.trim()
        .length === 0 ||
        LEAVE_INFO.trim().length === 0) {
        alert('请完成填写相关信息！');
        return;
      }
      if (NAME.length > 20) {
        alert('姓名不能超过20个字符!');
        return;
      }
      if (PHONE.length !== 11 || !(/(^[1-9]\d*$)/.test(PHONE))) {
        alert('电话不合法！');
        return;
      }
      if (ADDRESS.length > 200) {
        alert('地址不能超过200个字符!');
        return;
      }
      if (!(/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/).test(EMAIL)) {
        alert('EMAIL不合法!');
        return;
      }
      if (LEAVE_INFO.length > 1000) {
        alert('留言不能超过1000个字符!');
        return;
      }
      $.post(`"http://${window.location.host}/message/save"`, {
        NAME,
        PHONE,
        ADDRESS,
        EMAIL,
        LEAVE_INFO
      }, function (result) {
        claerControls();
        alert('提交成功！');
      });
    });
  });
</script>
<script type="text/javascript">
  // 百度地图API功能
  var map = new BMap.Map("map"); // 创建Map实例
  var point = new BMap.Point(118.934291, 31.399993); //坐标拾取网址：http://api.map.baidu.com/lbsapi/getpoint/index.html

  var marker = new BMap.Marker(point); // 创建标注



  var top_left_control = new BMap.ScaleControl({
    anchor: BMAP_ANCHOR_TOP_LEFT
  }); // 左上角，添加比例尺
  var top_left_navigation = new BMap.NavigationControl(); //左上角，添加默认缩放平移控件

  marker.setAnimation(BMAP_ANIMATION_BOUNCE); //跳动的动画
  map.centerAndZoom(point, 18); // 初始化地图,设置中心点坐标和地图级别
  map.addOverlay(marker); // 将标注添加到地图中
  map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放
  map.addControl(new BMap.MapTypeControl()); //添加地图类型控件
  map.setCurrentCity("高淳"); // 设置地图显示的城市 此项是必须设置的



  window.onresize = function () {

    map.centerAndZoom(point, 15); // 重置窗口的时候 重新获取中心点坐标的位置

  }

  /*
   * 若要开启全景模式，解注
   */

  /*var stCtrl = new BMap.PanoramaControl(); //构造全景控件
  map.addTileLayer(new BMap.PanoramaCoverageLayer());
  stCtrl.setOffset(new BMap.Size(20, 20));
  map.addControl(stCtrl);//添加全景控件*/




  //添加缩放控件
  map.addControl(top_left_control);
  map.addControl(top_left_navigation);
  /*map.addControl(top_right_navigation);  */
</script>



{% endblock %}